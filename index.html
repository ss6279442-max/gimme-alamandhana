<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Sameeha!</title>
<style>
  /* ===== Reset & base ===== */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: 'Georgia', serif;
    background: linear-gradient(135deg, #f9d5e5, #d0e6f7);
    min-height: 100vh;
    color: #222;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem 1.5rem 3rem;
    transition: background 0.3s ease, color 0.3s ease;
    cursor: url('data:image/svg+xml;utf8,<svg fill="%23ff66b3" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 3c-2 0-3.5 1.5-3.5 3.5S5.5 10 7.5 10 11 8.5 11 6.5 9.5 3 7.5 3zm9 0c-2 0-3.5 1.5-3.5 3.5S14.5 10 16.5 10 20 8.5 20 6.5 18.5 3 16.5 3zm-4.5 10c-2 0-3.5 1.5-3.5 3.5S9.5 20 11.5 20 15 18.5 15 16.5 13.5 13 12 13z"/></svg>') 12 12, auto;
  }
  .dark-mode {
    background: #121212;
    color: #eee;
  }
  /* Container */
  .container {
    max-width: 700px;
    width: 100%;
    background: rgba(255 255 255 / 0.85);
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    padding: 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease, color 0.3s ease;
  }
  .dark-mode .container {
    background: rgba(30 30 30 / 0.85);
  }

  /* Heading */
  h1 {
    font-family: 'Times New Roman', serif;
    font-size: 3.2rem;
    background: linear-gradient(90deg, #ff91a4, #91caff, #222);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 1px 1px 6px rgba(255, 255, 255, 0.6);
    margin-bottom: 0.2rem;
    filter: drop-shadow(0 0 8px #ff91a4);
  }
  .dark-mode h1 {
    filter: drop-shadow(0 0 8px #91caff);
  }
  .nickname {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    font-size: 1.3rem;
    margin-bottom: 1.5rem;
    color: #d47aff;
    font-style: italic;
    text-shadow: 0 0 4px #d47aff;
  }
  .dark-mode .nickname {
    color: #8bc6ff;
    text-shadow: 0 0 4px #8bc6ff;
  }

  /* Message */
  .message {
    font-family: 'Bradley Hand', cursive, 'Comic Sans MS', cursive;
    font-size: 1.2rem;
    line-height: 1.5;
    margin-bottom: 2rem;
    color: #444;
    position: relative;
  }
  .dark-mode .message {
    color: #ccc;
  }
  /* Decorative icons in message */
  .message span.icon {
    display: inline-block;
    margin: 0 0.15em;
    animation: sparkle 2s infinite ease-in-out;
    color: #ff5aa3;
  }
  .dark-mode .message span.icon {
    color: #8bc6ff;
  }

  @keyframes sparkle {
    0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
    50% { opacity: 0.5; transform: scale(1.2) rotate(20deg); }
  }

  /* Surprise Button */
  .btn-surprise {
    background: linear-gradient(45deg, #f48fb1, #82b1ff);
    border: none;
    color: #fff;
    font-weight: 700;
    font-size: 1.2rem;
    padding: 0.7rem 1.5rem;
    border-radius: 40px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(244,143,177,0.6);
    transition: background 0.3s ease, transform 0.2s ease;
    margin-bottom: 2rem;
    user-select: none;
  }
  .btn-surprise:hover, .btn-surprise:focus {
    background: linear-gradient(45deg, #f06292, #448aff);
    outline: none;
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(240,100,120,0.8);
  }

  /* Music Toggle Button */
  .btn-music {
    background: #eee;
    border: none;
    font-size: 1.1rem;
    padding: 0.5rem 1.1rem;
    border-radius: 20px;
    cursor: pointer;
    margin-bottom: 2rem;
    user-select: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    transition: background 0.3s ease;
  }
  .btn-music:hover, .btn-music:focus {
    background: #ddd;
    outline: none;
  }
  .dark-mode .btn-music {
    background: #444;
    color: #eee;
  }
  .dark-mode .btn-music:hover {
    background: #555;
  }

  /* Reply Box */
  #reply-section {
    text-align: left;
    margin-bottom: 2rem;
  }
  #reply-section label {
    font-weight: 600;
    display: block;
    margin-bottom: 0.5rem;
    font-family: 'Georgia', serif;
  }
  #reply-text {
    width: 100%;
    min-height: 70px;
    font-family: 'Comic Sans MS', cursive;
    font-size: 1.1rem;
    padding: 0.7rem;
    border-radius: 10px;
    border: 2px solid #aaa;
    resize: vertical;
    transition: border-color 0.3s ease;
  }
  #reply-text:focus {
    border-color: #f48fb1;
    outline: none;
  }
  #send-reply {
    margin-top: 0.8rem;
    padding: 0.6rem 1.3rem;
    border: none;
    background: linear-gradient(45deg, #f48fb1, #82b1ff);
    color: white;
    font-weight: 700;
    border-radius: 40px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(244,143,177,0.7);
    transition: background 0.3s ease;
    user-select: none;
  }
  #send-reply:hover, #send-reply:focus {
    background: linear-gradient(45deg, #f06292, #448aff);
    outline: none;
  }

  /* Display Replies */
  #replies {
    max-height: 300px;
    overflow-y: auto;
    border-top: 2px solid #f48fb1;
    padding-top: 1rem;
    font-family: 'Comic Sans MS', cursive;
    font-size: 1.1rem;
    color: #555;
  }
  .reply-msg {
    margin-bottom: 0.7rem;
    padding: 0.5rem 1rem;
    background: #fde9f2;
    border-radius: 15px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    word-wrap: break-word;
  }
  .dark-mode #replies .reply-msg {
    background: #2c2c3a;
    color: #ddd;
  }

  /* Scrolling handwritten note style for replies */
  #replies::-webkit-scrollbar {
    width: 8px;
  }
  #replies::-webkit-scrollbar-thumb {
    background: #f48fb1;
    border-radius: 10px;
  }
  #replies::-webkit-scrollbar-track {
    background: #fce8f3;
  }
  .dark-mode #replies::-webkit-scrollbar-thumb {
    background: #448aff;
  }
  .dark-mode #replies::-webkit-scrollbar-track {
    background: #1e1e2f;
  }

  /* Countdown timer */
  #countdown {
    font-family: 'Georgia', serif;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: #d63e69;
    text-shadow: 1px 1px 4px #fff;
  }
  .dark-mode #countdown {
    color: #82b1ff;
    text-shadow: 1px 1px 4px #222;
  }

  /* Popup Surprise */
  #popup {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    background: #fff0f6;
    border-radius: 25px;
    padding: 2rem 2.5rem;
    box-shadow: 0 10px 30px rgba(244,143,177,0.7);
    opacity: 0;
    pointer-events: none;
    z-index: 1001;
    width: 90vw;
    max-width: 400px;
    transition: opacity 0.3s ease, transform 0.3s ease;
    text-align: center;
  }
  #popup.show {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(1);
  }
  #popup h2 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #d63e69;
  }
  #popup p {
    font-family: 'Comic Sans MS', cursive;
    font-size: 1.1rem;
    margin-bottom: 2rem;
    color: #555;
  }
  #popup button.close-btn {
    background: #d63e69;
    border: none;
    padding: 0.5rem 1.4rem;
    border-radius: 25px;
    color: #fff;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(214,62,105,0.7);
    user-select: none;
    transition: background 0.3s ease;
  }
  #popup button.close-btn:hover, #popup button.close-btn:focus {
    background: #ad2c56;
    outline: none;
  }
  .dark-mode #popup {
    background: #331a2f;
    box-shadow: 0 10px 30px rgba(136,178,255,0.7);
  }
  .dark-mode #popup h2 {
    color: #82b1ff;
  }
  .dark-mode #popup p {
    color: #ccc;
  }
  .dark-mode #popup button.close-btn {
    background: #448aff;
  }
  .dark-mode #popup button.close-btn:hover {
    background: #3366cc;
  }

  /* Confetti styles */
  #confetti-container {
    position: fixed;
    pointer-events: none;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    overflow: visible;
    z-index: 1000;
  }
  .confetti-piece {
    position: absolute;
    width: 10px;
    height: 10px;
    opacity: 0.8;
    border-radius: 50%;
    animation-name: confetti-fall;
    animation-timing-function: linear;
  }
  @keyframes confetti-fall {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }

  /* Balloons animation container */
  #balloons-container {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    pointer-events: none;
    overflow: visible;
    z-index: 0;
  }
  .balloon {
    position: absolute;
    bottom: -150px;
    width: 60px;
    height: 90px;
    background: linear-gradient(135deg, #ff91a4, #f06292);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    box-shadow: inset -8px -10px 10px rgba(255,255,255,0.6);
    animation-timing-function: linear;
    user-select: none;
  }
  .balloon::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background: #f48fb1;
    border-radius: 2px;
  }
  .balloon.red { background: linear-gradient(135deg, #ff91a4, #f06292); box-shadow: inset -8px -10px 10px rgba(255,100,150,0.8); }
  .balloon.blue { background: linear-gradient(135deg, #91caff, #448aff); box-shadow: inset -8px -10px 10px rgba(50,120,255,0.8); }
  .balloon.purple { background: linear-gradient(135deg, #b391ff, #7b5fff); box-shadow: inset -8px -10px 10px rgba(120,50,255,0.8); }

  /* Balloon animation keyframes */
  @keyframes floatUp {
    0% {
      transform: translateY(0) translateX(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(-110vh) translateX(30px) rotate(360deg);
      opacity: 0;
    }
  }

  /* Accessibility controls container */
  #accessibility-controls {
    margin-bottom: 2rem;
    display: flex;
    gap: 1rem;
    justify-content: center;
  }
  #accessibility-controls button {
    padding: 0.4rem 0.9rem;
    font-size: 1.2rem;
    border: 2px solid #f48fb1;
    border-radius: 25px;
    background: white;
    color: #d63e69;
    cursor: pointer;
    transition: background 0.3s ease, color 0.3s ease;
    user-select: none;
  }
  #accessibility-controls button:hover, #accessibility-controls button:focus {
    background: #f48fb1;
    color: white;
    outline: none;
  }
  .dark-mode #accessibility-controls button {
    background: #2c2c3a;
    color: #82b1ff;
    border-color: #82b1ff;
  }
  .dark-mode #accessibility-controls button:hover, .dark-mode #accessibility-controls button:focus {
    background: #82b1ff;
    color: #222;
  }

  /* Dark Mode Toggle Button */
  #dark-mode-toggle {
    padding: 0.4rem 1.1rem;
    border: 2px solid #91caff;
    border-radius: 25px;
    background: white;
    color: #448aff;
    cursor: pointer;
    user-select: none;
    font-weight: 700;
    margin-bottom: 2rem;
    transition: background 0.3s ease, color 0.3s ease;
  }
  #dark-mode-toggle:hover, #dark-mode-toggle:focus {
    background: #448aff;
    color: white;
    outline: none;
  }
  .dark-mode #dark-mode-toggle {
    background: #2c2c3a;
    color: #82b1ff;
    border-color: #82b1ff;
  }
  .dark-mode #dark-mode-toggle:hover, .dark-mode #dark-mode-toggle:focus {
    background: #82b1ff;
    color: #222;
  }

  /* Sharing buttons */
  #sharing-buttons {
    display: flex;
    justify-content: center;
    gap: 1.3rem;
    margin-top: 1rem;
  }
  #sharing-buttons button {
    border: none;
    cursor: pointer;
    padding: 0.5rem 1rem;
    font-weight: 700;
    border-radius: 30px;
    font-size: 1rem;
    color: white;
    user-select: none;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    transition: background 0.3s ease;
  }
  #share-whatsapp {
    background: #25d366;
  }
  #share-whatsapp:hover, #share-whatsapp:focus {
    background: #1ebe57;
    outline: none;
  }
  #share-twitter {
    background: #1da1f2;
  }
  #share-twitter:hover, #share-twitter:focus {
    background: #0d95e8;
    outline: none;
  }
  #share-facebook {
    background: #1877f2;
  }
  #share-facebook:hover, #share-facebook:focus {
    background: #0f61d9;
    outline: none;
  }

  /* Responsive adjustments */
  @media (max-width: 450px) {
    h1 {
      font-size: 2.5rem;
    }
    .btn-surprise {
      font-size: 1rem;
      padding: 0.6rem 1rem;
    }
    #reply-text {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>
<div id="balloons-container"></div>
<div id="confetti-container"></div>

<div class="container" role="main" aria-label="Birthday greeting and interactive features">

  <h1>Happy Birthday Sameeha!</h1>
  <div class="nickname" aria-label="Nickname">aka "Sammy"</div>

  <p class="message" aria-live="polite" aria-atomic="true">
    Dear Sameeha, wishing you a day filled with love, laughter, and a little bit of magic 
    <span class="icon" aria-hidden="true">🎉</span> 
    <span class="icon" aria-hidden="true">🎂</span> 
    <span class="icon" aria-hidden="true">🌟</span>
  </p>

  <button class="btn-surprise" id="surprise-btn" aria-haspopup="dialog" aria-expanded="false" aria-controls="popup">
    🎁 Surprise!
  </button>

  <audio id="birthday-music" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_14c3868eab.mp3?filename=happy-birthday-43881.mp3" preload="auto"></audio>
  <button id="music-toggle" class="btn-music" aria-pressed="false" aria-label="Play birthday music">
    ▶ Play Music
  </button>

  <div id="countdown" aria-live="polite" aria-atomic="true" aria-label="Countdown to next birthday"></div>

  <div id="reply-section" aria-label="Send a birthday message">
    <label for="reply-text">Leave your message:</label>
    <textarea id="reply-text" placeholder="Write your birthday wishes here..." aria-required="true"></textarea>
    <button id="send-reply" aria-label="Send your message">Send</button>
  </div>

  <div id="replies" aria-live="polite" aria-atomic="false" aria-label="Birthday messages from friends"></div>

  <div id="accessibility-controls" aria-label="Accessibility controls">
    <button id="font-increase" aria-label="Increase font size">A+</button>
    <button id="font-decrease" aria-label="Decrease font size">A-</button>
  </div>

  <button id="dark-mode-toggle" aria-pressed="false" aria-label="Toggle dark mode">Dark Mode</button>

  <div id="sharing-buttons" aria-label="Share this birthday page">
    <button id="share-whatsapp" aria-label="Share on WhatsApp">WhatsApp</button>
    <button id="share-twitter" aria-label="Share on Twitter">Twitter</button>
    <button id="share-facebook" aria-label="Share on Facebook">Facebook</button>
  </div>
</div>

<!-- Surprise Popup -->
<div id="popup" role="dialog" aria-modal="true" aria-labelledby="popup-title" aria-hidden="true" tabindex="-1">
  <h2 id="popup-title">Surprise! 🎉</h2>
  <p>Hope this day brings you endless happiness and wonderful memories! 💖</p>
  <button class="close-btn" aria-label="Close surprise popup">Close</button>
</div>

<script>
  // Elements
  const surpriseBtn = document.getElementById('surprise-btn');
  const popup = document.getElementById('popup');
  const closePopupBtn = popup.querySelector('.close-btn');
  const musicBtn = document.getElementById('music-toggle');
  const music = document.getElementById('birthday-music');
  const replyText = document.getElementById('reply-text');
  const sendReplyBtn = document.getElementById('send-reply');
  const repliesSection = document.getElementById('replies');
  const countdownEl = document.getElementById('countdown');
  const accessibilityInc = document.getElementById('font-increase');
  const accessibilityDec = document.getElementById('font-decrease');
  const darkToggleBtn = document.getElementById('dark-mode-toggle');
  const confettiContainer = document.getElementById('confetti-container');
  const balloonsContainer = document.getElementById('balloons-container');

  // Surprise Popup Logic
  surpriseBtn.addEventListener('click', () => {
    popup.classList.add('show');
    popup.setAttribute('aria-hidden', 'false');
    surpriseBtn.setAttribute('aria-expanded', 'true');
    popup.focus();
    launchConfetti();
  });

  closePopupBtn.addEventListener('click', () => {
    popup.classList.remove('show');
    popup.setAttribute('aria-hidden', 'true');
    surpriseBtn.setAttribute('aria-expanded', 'false');
    surpriseBtn.focus();
  });

  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && popup.classList.contains('show')) {
      popup.classList.remove('show');
      popup.setAttribute('aria-hidden', 'true');
      surpriseBtn.setAttribute('aria-expanded', 'false');
      surpriseBtn.focus();
    }
  });

  // Music Toggle
  musicBtn.addEventListener('click', () => {
    if (music.paused) {
      music.play();
      musicBtn.textContent = '⏸ Pause Music';
      musicBtn.setAttribute('aria-pressed', 'true');
    } else {
      music.pause();
      musicBtn.textContent = '▶ Play Music';
      musicBtn.setAttribute('aria-pressed', 'false');
    }
  });

  // Reply functionality
  function loadReplies() {
    const savedReplies = JSON.parse(localStorage.getItem('birthdayReplies') || '[]');
    repliesSection.innerHTML = '';
    savedReplies.forEach(reply => {
      const div = document.createElement('div');
      div.className = 'reply-msg';
      div.textContent = reply;
      repliesSection.appendChild(div);
    });
  }

  sendReplyBtn.addEventListener('click', () => {
    const message = replyText.value.trim();
    if (message) {
      const savedReplies = JSON.parse(localStorage.getItem('birthdayReplies') || '[]');
      savedReplies.push(message);
      localStorage.setItem('birthdayReplies', JSON.stringify(savedReplies));
      replyText.value = '';
      loadReplies();
    }
  });

  // Load replies on page load
  loadReplies();

  // Countdown Timer to next birthday (Assuming birthday is December 1st)
  function updateCountdown() {
    const now = new Date();
    let birthday = new Date(now.getFullYear(), 11, 1); // December 1st
    if (now > birthday) {
      birthday = new Date(now.getFullYear() + 1, 11, 1);
    }
    const diff = birthday - now;

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);

    countdownEl.textContent = `Next birthday in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();

  // Confetti Effect
  const colors = ['#ff91a4', '#91caff', '#222222'];
  function createConfettiPiece() {
    const div = document.createElement('div');
    div.classList.add('confetti-piece');
    div.style.left = Math.random() * window.innerWidth + 'px';
    div.style.top = '-10px';
    div.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    div.style.animationDuration = 3 + Math.random() * 2 + 's';
    confettiContainer.appendChild(div);
    setTimeout(() => {
      confettiContainer.removeChild(div);
    }, 5000);
  }
  function launchConfetti() {
    for(let i = 0; i < 30; i++) {
      setTimeout(createConfettiPiece, i * 100);
    }
  }

  // Balloons Animation
  function createBalloon() {
    const balloon = document.createElement('div');
    balloon.classList.add('balloon');
    const colors = ['red', 'blue', 'purple'];
    const color = colors[Math.floor(Math.random() * colors.length)];
    balloon.classList.add(color);
    balloon.style.left = Math.random() * window.innerWidth + 'px';
    balloon.style.animationDuration = 8 + Math.random() * 7 + 's';
    balloon.style.animationName = 'floatUp';
    balloonsContainer.appendChild(balloon);
    setTimeout(() => {
      balloonsContainer.removeChild(balloon);
    }, 15000);
  }
  setInterval(createBalloon, 1500);

  // Accessibility: Font Size Increase/Decrease
  accessibilityInc.addEventListener('click', () => {
    const currentSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size-base') || '16');
    const newSize = Math.min(currentSize + 1, 24);
    document.documentElement.style.setProperty('--font-size-base', newSize + 'px');
    document.body.style.fontSize = newSize + 'px';
  });
  accessibilityDec.addEventListener('click', () => {
    const currentSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size-base') || '16');
    const newSize = Math.max(currentSize - 1, 12);
    document.documentElement.style.setProperty('--font-size-base', newSize + 'px');
    document.body.style.fontSize = newSize + 'px';
  });

  // Dark Mode Toggle
  darkToggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    const isDark = document.body.classList.contains('dark-mode');
    darkToggleBtn.setAttribute('aria-pressed', isDark);
    darkToggleBtn.textContent = isDark ? 'Light Mode' : 'Dark Mode';
  });

  // Sharing Buttons
  const pageUrl = encodeURIComponent(window.location.href);
  const shareText = encodeURIComponent("Happy Birthday Sameeha! Join the celebration!");

  document.getElementById('share-whatsapp').addEventListener('click', () => {
    window.open(`https://api.whatsapp.com/send?text=${shareText}%20${pageUrl}`, '_blank', 'noopener');
  });
  document.getElementById('share-twitter').addEventListener('click', () => {
    window.open(`https://twitter.com/intent/tweet?text=${shareText}&url=${pageUrl}`, '_blank', 'noopener');
  });
  document.getElementById('share-facebook').addEventListener('click', () => {
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`, '_blank', 'noopener');
  });

  // Initial font size setup
  document.documentElement.style.setProperty('--font-size-base', '16px');
  document.body.style.fontSize = '16px';
</script>
</body>
</html>
